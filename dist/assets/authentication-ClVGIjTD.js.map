{"version":3,"file":"authentication-ClVGIjTD.js","sources":["../../pages/authentication.mdx"],"sourcesContent":["import SignatureGenerator from \"../src/SignatureGenerator\";\r\n\r\n# Authentication\r\n\r\nARP Digital GPS API uses HMAC SHA256 signature-based authentication to ensure secure access to all endpoints.\r\n\r\n## Overview\r\n\r\nEvery API request must include the following headers:\r\n\r\n- `X-API-Key`: Your unique API key\r\n- `X-Timestamp`: Current Unix timestamp in seconds\r\n- `X-Signature`: HMAC SHA256 signature\r\n\r\n## Signature Generation\r\n\r\nThe signature is calculated using HMAC SHA256 with the following formula:\r\n\r\n```\r\nsignature = HMAC-SHA256(apiSecret, apiKey + requestBody + timestamp)\r\n```\r\n\r\n### Step-by-Step Process\r\n\r\n1. **Get current timestamp**: Unix timestamp in seconds\r\n2. **Prepare the message**: Concatenate `apiKey + requestBody + timestamp`\r\n3. **Generate signature**: Create HMAC SHA256 hash using your API secret as the key\r\n4. **Include headers**: Add all required headers to your request\r\n\r\n## Code Examples\r\n\r\n### JavaScript/Node.js\r\n\r\n```javascript\r\nimport crypto from \"crypto\";\r\n\r\nfunction generateSignature(apiKey, apiSecret, requestBody, timestamp) {\r\n  // Convert timestamp to string if it's a number\r\n  const timestampStr = timestamp.toString();\r\n\r\n  // Create the message to sign\r\n  const message = apiKey + requestBody + timestampStr;\r\n\r\n  // Generate HMAC SHA256 signature\r\n  const signature = crypto\r\n    .createHmac(\"sha256\", apiSecret)\r\n    .update(message)\r\n    .digest(\"hex\");\r\n\r\n  return signature;\r\n}\r\n\r\n// Example usage\r\nasync function makeApiRequest(endpoint, requestBody = \"\") {\r\n  const apiKey = \"your_api_key_here\";\r\n  const apiSecret = \"your_api_secret_here\"; // Used only for signature generation\r\n  const timestamp = Math.floor(Date.now() / 1000);\r\n  const signature = generateSignature(\r\n    apiKey,\r\n    apiSecret,\r\n    requestBody,\r\n    timestamp\r\n  );\r\n\r\n  const response = await fetch(`https://platform.arpdigital.io/services${endpoint}`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"X-API-Key\": apiKey,\r\n      \"X-Timestamp\": timestamp.toString(),\r\n      \"X-Signature\": signature,\r\n    },\r\n    body: requestBody,\r\n  });\r\n\r\n  return response.json();\r\n}\r\n\r\n// Example: Get a quote\r\nconst quoteRequest = JSON.stringify({\r\n  fromCurrency: \"USD\",\r\n  toCurrency: \"PHP\",\r\n  fromAmount: 100,\r\n});\r\n\r\nmakeApiRequest(\"/quote\", quoteRequest)\r\n  .then(data => console.log(\"Quote:\", data))\r\n  .catch(error => console.error(\"Error:\", error));\r\n```\r\n\r\n### Python\r\n\r\n```python\r\nimport hmac\r\nimport hashlib\r\nimport time\r\nimport json\r\nimport requests\r\n\r\ndef generate_signature(api_key, api_secret, request_body, timestamp):\r\n    \"\"\"Generate HMAC SHA256 signature for API authentication\"\"\"\r\n    # Create the message to sign\r\n    message = api_key + request_body + str(timestamp)\r\n\r\n    # Generate HMAC SHA256 signature\r\n    signature = hmac.new(\r\n        api_secret.encode('utf-8'),\r\n        message.encode('utf-8'),\r\n        hashlib.sha256\r\n    ).hexdigest()\r\n\r\n    return signature\r\n\r\ndef make_api_request(endpoint, request_body=''):\r\n    \"\"\"Make authenticated API request\"\"\"\r\n    api_key = 'your_api_key_here'\r\n    api_secret = 'your_api_secret_here'  # Used only for signature generation\r\n    timestamp = int(time.time())\r\n\r\n    signature = generate_signature(api_key, api_secret, request_body, timestamp)\r\n\r\n    headers = {\r\n        'Content-Type': 'application/json',\r\n        'X-API-Key': api_key,\r\n        'X-Timestamp': str(timestamp),\r\n        'X-Signature': signature\r\n    }\r\n\r\n    response = requests.post(\r\n        f'https://gps.arpdigital.io/api/v1{endpoint}',\r\n        headers=headers,\r\n        data=request_body\r\n    )\r\n\r\n    return response.json()\r\n\r\n# Example: Get a quote\r\nquote_request = json.dumps({\r\n    'fromCurrency': 'USD',\r\n    'toCurrency': 'PHP',\r\n    'fromAmount': 100\r\n})\r\n\r\ntry:\r\n    result = make_api_request('/quote', quote_request)\r\n    print('Quote:', result)\r\nexcept Exception as error:\r\n    print('Error:', error)\r\n```\r\n\r\n### PHP\r\n\r\n```php\r\n<?php\r\n\r\nfunction generateSignature($apiKey, $apiSecret, $requestBody, $timestamp) {\r\n    // Create the message to sign\r\n    $message = $apiKey . $requestBody . $timestamp;\r\n\r\n    // Generate HMAC SHA256 signature\r\n    return hash_hmac('sha256', $message, $apiSecret);\r\n}\r\n\r\nfunction makeApiRequest($endpoint, $requestBody = '') {\r\n    $apiKey = 'your_api_key_here';\r\n    $apiSecret = 'your_api_secret_here'; // Used only for signature generation\r\n    $timestamp = time();\r\n\r\n    $signature = generateSignature($apiKey, $apiSecret, $requestBody, $timestamp);\r\n\r\n    $headers = [\r\n        'Content-Type: application/json',\r\n        'X-API-Key: ' . $apiKey,\r\n        'X-Timestamp: ' . $timestamp,\r\n        'X-Signature: ' . $signature\r\n    ];\r\n\r\n    $curl = curl_init();\r\n    curl_setopt_array($curl, [\r\n        CURLOPT_URL => 'https://gps.arpdigital.io/api/v1' . $endpoint,\r\n        CURLOPT_RETURNTRANSFER => true,\r\n        CURLOPT_POST => true,\r\n        CURLOPT_POSTFIELDS => $requestBody,\r\n        CURLOPT_HTTPHEADER => $headers\r\n    ]);\r\n\r\n    $response = curl_exec($curl);\r\n    curl_close($curl);\r\n\r\n    return json_decode($response, true);\r\n}\r\n\r\n// Example: Get a quote\r\n$quoteRequest = json_encode([\r\n    'fromCurrency' => 'USD',\r\n    'toCurrency' => 'PHP',\r\n    'fromAmount' => 100\r\n]);\r\n\r\n$result = makeApiRequest('/quote', $quoteRequest);\r\necho 'Quote: ' . print_r($result, true);\r\n?>\r\n```\r\n\r\n### cURL\r\n\r\n```bash\r\n#!/bin/bash\r\n\r\nAPI_KEY=\"your_api_key_here\"\r\nAPI_SECRET=\"your_api_secret_here\"\r\nTIMESTAMP=$(date +%s)\r\nREQUEST_BODY='{\"fromCurrency\":\"USD\",\"toCurrency\":\"PHP\",\"fromAmount\":100}'\r\n\r\n# Generate signature (requires openssl)\r\nMESSAGE=\"${API_KEY}${REQUEST_BODY}${TIMESTAMP}\"\r\nSIGNATURE=$(echo -n \"$MESSAGE\" | openssl dgst -sha256 -hmac \"$API_SECRET\" -hex | sed 's/^.* //')\r\n\r\ncurl -X POST \"https://gps.arpdigital.io/api/v1/quote\" \\\r\n  -H \"Content-Type: application/json\" \\\r\n  -H \"X-API-Key: $API_KEY\" \\\r\n  -H \"X-Timestamp: $TIMESTAMP\" \\\r\n  -H \"X-Signature: $SIGNATURE\" \\\r\n  -d \"$REQUEST_BODY\"\r\n```\r\n\r\n## Interactive Signature Generator\r\n\r\n<SignatureGenerator />\r\n\r\n## Important Notes\r\n\r\n### Timestamp Validation\r\n\r\n- Timestamps must be within 1000 seconds (16.67 minutes) of the server time\r\n- Use Unix timestamp in seconds, not milliseconds\r\n\r\n### Request Body Handling\r\n\r\n- For GET requests with no body, use an empty string `\"\"`\r\n- For POST/PUT requests, use the exact JSON string that will be sent\r\n- Ensure consistent encoding (UTF-8)\r\n\r\n### Common Errors\r\n\r\n#### Invalid Signature (403 Forbidden)\r\n\r\n- Check that your API secret is correct\r\n- Verify the message format: `apiKey + requestBody + timestamp`\r\n- Ensure timestamp is in seconds, not milliseconds\r\n\r\n#### Timestamp Too Old (403 Forbidden)\r\n\r\n- Generate a fresh timestamp for each request\r\n- Check your system clock synchronization\r\n\r\n#### Missing Headers (403 Forbidden)\r\n\r\n- Ensure all required headers are present:\r\n  - `X-API-Key`\r\n  - `X-Timestamp`\r\n  - `X-Signature`\r\n\r\n## Testing Your Implementation\r\n\r\nUse our signature validation endpoint to test your implementation:\r\n\r\n```javascript\r\n// Test endpoint for signature validation\r\nconst testSignature = async () => {\r\n  const response = await makeApiRequest(\"/test-auth\", \"\");\r\n  console.log(\"Auth test result:\", response);\r\n};\r\n```\r\n\r\nIf your signature generation is correct, you should receive a success response. If not, check the error message for guidance on what might be wrong.\r\n\r\n## Security Best Practices\r\n\r\n1. **Never expose your API secret** in client-side code\r\n2. **Rotate your API keys** regularly\r\n3. **Use HTTPS** for all API requests\r\n4. **Implement proper error handling** for authentication failures\r\n5. **Store credentials securely** using environment variables or secure vaults\r\n"],"names":["_jsx","_components","_jsxs"],"mappings":"srDAEE,SAAA;aAEF,SAAA;4BAEG,SAAA;aAEH,SAAA;;qDAEE,SAAA,WAAW,CAAA,EAAA,uBAAA;qDACX,SAAA,aAAa,CAAA,EAAA,qCAAA;qDACb,SAAA,aAAa,CAAA,EAAA,yBAAA;;wCAEZ,SAAA;aAEH,SAAA;;wCAMI,SAAA;;yCAEC,SAAA,uBAAuB,CAAA,EAAA,6BAAA;yCACvB,SAAA,qBAAqB,CAAA,EAAA,iBAAAA,MAAAC,EAAA,KAAA,eAAc,SAAA;yCACnC,SAAA,oBAAoB,CAAA,EAAA,4DAAA;yCACpB,SAAA,iBAAiB,CAAA,EAAA,4CAAA;;iCAEnB,SAAA;oCAEC,SAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BA2DA,SAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uBA4DA,SAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;wBAsDA,SAAA;;;;;;;;;;;;;;;;;;mDAsBD,SAAA;;mCAIA,SAAA;wCAEC,SAAA;;cAEF,SAAA;cACA,SAAA;;yCAEE,SAAA;;eAEF,SAAA,CAAA,sDAAAD,MAAAC,EAAA,KAAA,eAAmD,SAAA;cACnD,SAAA;cACA,SAAA;;iCAEE,SAAA;mDAEC,SAAA;;cAEH,SAAA;eACA,SAAA,CAAA,8BAAAD,MAAAC,EAAA,KAAA,eAA2B,SAAA;cAC3B,SAAA;;mDAEG,SAAA;;cAEH,SAAA;cACA,SAAA;;iDAEG,SAAA;;eAEH,SAAA,CAAA,2CAAA;AAAA,EAAAC,EAAAA,KAAAD,EAAA,GAAA;mDACE,SAAA;mDACA,SAAA;mDACA,SAAA;;;;+CAED,SAAA;aAEH,SAAA;;;;;;aAUA,SAAA;2CAEG,SAAA;;yCAEE,SAAA,8BAA8B,CAAA,EAAA,sBAAA;yCAC9B,SAAA,sBAAsB,CAAA,EAAA,YAAA;yCACtB,SAAA,WAAW,CAAA,EAAA,uBAAA;yCACX,SAAA,iCAAiC,CAAA,EAAA,8BAAA;yCACjC,SAAA,4BAA4B,CAAA,EAAA,+CAAA;"}